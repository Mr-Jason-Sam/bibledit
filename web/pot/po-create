# Find all templates and extract the gettext strings from it.
find .. -iname *.tpl -exec php ../smarty-gettext/tsmarty2c.php '{}' ";" >> smarty.c

# Create a file containing all the php files to be processed.
find .. -iname '*.php' >> gettextfiles

# Add the smarty.c file.
echo smarty.c >> gettextfiles

# In case the bibledit.pot does not exist, create it, so that xgettext does not complain.
touch bibledit.pot

# Create the .pot file and join it with an existing one.
xgettext --files-from=gettextfiles --default-domain=bibledit --join-existing --force-po --copyright-holder="Teus Benschop" -o bibledit.pot --from-code=UTF-8 --no-location

# Clean working files.
rm smarty.c
rm gettextfiles


