<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
<title>USB stick collaboration</title>
<!--
Copyright (Â©) 2003-2008 Teus Benschop.
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.2
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
Texts.  A copy of the license is included in the section entitled "GNU
Free Documentation License" in the file FDL.
-->
<link href="bibledit.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h2><a name="usbstickcollaboration"></a>USB stick collaboration</h2>
<!-- Table of Contents Start -->
<div id="toc">
<ul>
<li>
<a href="#introduction" class="level1">Introduction</a></li>
<li>
<a href="#thestick" class="level1">The stick</a></li>
<li>
<a href="#users" class="level1">Users</a></li>
<li>
<a href="#notes" class="level1">Notes</a></li>
</ul>
</div>
<!-- Table of Contents End -->
<h3><a name="introduction"></a>Introduction</h3>
<p>In the tutorial below we will set up a basic system using a USB stick that
has the data repository, and one or more users that collaborate. The stick
needs to be physically carried from one user to the other for collaboration
to work.</p>
<h3><a name="thestick"></a>The stick</h3>
<p>The USB stick will hold the data repository.</p>
<p>To make this stick fit for collaboration, there are a few steps to be
taken. These steps are:</p>
<p>1. The first thing to do is to insert the stick into the computer and to
notice whether it mounts automatically. If it does not mount on its own, then
automatic mounting needs to be set up. Setting up automatic mounting goes
beyond the scope of this tutorial.</p>
<p>2. Once automatic mounting works, the other thing to notice and to write
down is where the stick mounts. Usually it will mount at</p>
<pre>/media/usbdisk</pre>
<p>Where it mounts can usually be deduced from the window that pops up when
the stick is inserted. Full information can be seen using the command</p>
<pre>df</pre>
<p>Normally the path /media/usbdisk will be visible in the output of this
command. If it is a different path, that will be shown too. At this stage it
is important to note where exactly it mounts.</p>
<p>3. The next step will be to create a directory for the repository, and to
make that directory writable. If we assume that the stick mounts at
/media/usbdisk, then the command to create a directory called "repository"
is:</p>
<pre>sudo mkdir /media/usbdisk/repository</pre>
<p>Notice the "sudo" command, which means that this usually needs to be done
by user root. If this is done by an ordinary user, permission would be
denied.</p>
<p>Once the directory for the repository is there, this directory needs to be
made writable for ordinary users. This is the command:</p>
<pre>sudo chmod -R 0777 /media/usbdisk/repository/</pre>
<p>Note the "sudo" again.</p>
<p>Now it is time to check whether the USB stick is writable. We do this by
trying to create a file in the repository. If this succeeds, then it is
writable. Note that this step can be skipped, because Bibledit itself also
tests whether the stick is writable. Here's the command in case you'd like to
do it:</p>
<pre>touch /media/usbdisk/repository/testfile</pre>
<p>This command should complete without errors. After that the file needs to
be removed again:</p>
<pre>rm /media/usbdisk/repository/testfile</pre>
<p>4. The fourth step is to create a repository on the USB stick, and to copy
the data to it.</p>
<p>To create a shared repository on the USB stick, type:</p>
<pre>cd /media/usbdisk/repository</pre>
<pre>git --bare init-db --shared</pre>
<p>Git will respond saying that an empty shared Git repository has been
created.</p>
<p>Once this has been done we need to copy the actual data to the USB stick.
In the example we are going to put the data of Bibledit project "Ndebele"
onto it.</p>
<pre>git --bare fetch ~/.bibledit/projects/Ndebele/data master:master</pre>
<p>It is very important to be sure that the data to be copied is up-to-date.
This is because it is copied to the USB stick, and this stick is going to be
the data repository where all other users connect to.</p>
<h3><a name="users"></a>Users</h3>
<p>We are now going to setup a user.</p>
<p>The user inserts the USB stick into his computer. In Bibledit he opens the
project he wishes to work on with others.</p>
<p>He goes to menu <a href="olh_git_setup.html">Preferences / Git
repository</a>.</p>
<p>In that dialog, he ticks "Use remote repository".</p>
<p>Under "Repository", he enters file:///media/usbdisk/repository</p>
<p>In the dialog he verifies that write access has been granted.</p>
<p>He then ticks "Copy repository to local data". This is to import all data
from the repository into his own project.</p>
<p>He then clicks OK.</p>
<p>This finishes the setup of the user. He can now work in Bibledit as
before, and his data will automatically be updated in the repository.</p>
<p>Setting up a second user, a third, a fourth, and so on, goes similar.</p>
<h3><a name="notes"></a>Notes</h3>
<p>If several USB sticks are used at the same time, then only the first one
will mount to /media/usbdisk. Any sticks inserted later will mount under a
different name. To ensure that a certain stick always mount under the same
name, it will be helpful to write a label to that USB stick. Explaining how
that is done is beyond the scope of this tutorial. Hint: For ext2 and ext3
filesystems use command e2label.</p>
</body>
</html>
