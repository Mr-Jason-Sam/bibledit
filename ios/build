#!/bin/bash

# Build libbibledit on OS X for iOS.

export IPHONEOS_DEPLOYMENT_TARGET="6.0"
export CC="/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang"
export CPP="/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/cpp"
export CXX="/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++"


echo Todo add the compiler flags as given in configure.ac and Makefile.am.
xxx
exit

ARCH="armv7"
export CFLAGS="-arch ${ARCH} -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk"
export LDFLAGS="-arch ${ARCH} -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk"
pushd ../lib
make --keep-going distclean
./configure --host="${ARCH}-apple-darwin"
make -j `sysctl -n hw.logicalcpu_max`
# cp lib/.libs/libcurl.a "${HOME}/Desktop/libcurl-${ARCH}.a"
# cp include/curl/curlbuild.h ~/Desktop/curlbuild32.h
popd
