#!/bin/bash

# Clean any previous output.
rm ~/Desktop/libgit2.a
rm -rf ~/Desktop/git2

# Go to the root directory where to work from.
cd libgit2*

# Clean / create build directory.
rm -rf build
mkdir build
cd build

# Configure builder.
cmake .. -DBUILD_SHARED_LIBS=OFF -DBUILD_CLAR=OFF -DTHREADSAFE=ON

# Build library.
cmake --build .

# Copy the output to the desktop.
cp -r ../include ~/Desktop/git2
cp libgit2.a ~/Desktop
cd ..

# Clean build directory.
rm -rf build

echo If everything went well, then libgit2 has been built for OS X.
echo The output was copied to the desktop.
